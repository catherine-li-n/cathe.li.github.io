<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0"><meta name="description" content="Go面向对象 [ catherien's blog ] "><meta name="theme-color" content="#ebc65a"><title>Go面向对象 [ catherien's blog ] </title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css"><script src="https://cdn.bootcss.com/highlight.js/9.6.0/highlight.min.js" defer></script><script src="/js/paper.js" defer></script><script src="https://www.googletagmanager.com/gtag/js?id=xx-xxxxxxx-xx" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'xx-xxxxxxx-xx');</script><link rel="stylesheet" href="/css/tocbot.css"><script src="/js/tocbot.js" defer></script><script>window.addEventListener('DOMContentLoaded', () => {
  tocbot.init({
    // Where to render the table of contents.
    tocSelector: '.toc__content',
    // Where to grab the headings to build the table of contents.
    contentSelector: '.article__content',
    // Which headings to grab inside of the contentSelector element.
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    // For headings inside relative or absolute positioned containers within content.
    hasInnerContainers: true,
    orderedList: false,
    collapseDepth: 2,
  });
})</script><link rel="preload" href="https://cdn.bootcss.com/highlight.js/9.6.0/styles/github.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.6.0/styles/github.min.css"><link rel="preload" href="https://fonts.googleapis.com/css?family=Abril+Fatface&amp;display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface&amp;display=swap"><meta name="generator" content="Hexo 5.2.0"></head><body><div class="mask-border"></div><div class="head"><div class="head__inner"><h1><a href="/">catherien's blog</a></h1><p></p></div></div><div class="paper-container"><div class="main"><div class="location-bar"><div class="line-1"><div class="horizontal-line" style="height: 3px"></div></div><div class="line-2"><div class="horizontal-line" style="height: 1px"></div></div><p class="text">Go面向对象</p><div class="switch-button"><input class="container_toggle" type="checkbox" id="switch" name="mode"><label for="switch">Toggle</label></div><div class="line-3"><div class="horizontal-line" style="height: 1px"></div></div></div><div class="main__2-col"><article class="post-view__article"><div class="article__infomation"><div class="posts-item"><h2 class="posts-item__title"><a href="">Go面向对象</a></h2><span class="post__date">2020-09-21</span><a href="/tags/go/"><span class="post__tags">#go</span></a><a href="/tags/go%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"><span class="post__tags">#go基础学习</span></a></div></div><div class="article__content"><p>Go 面向对象</p>
<h1 id="Struct"><a href="#Struct" class="headerlink" title="Struct"></a>Struct</h1><figure class="highlight go"><table><tr><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> person <span class="hljs-keyword">struct</span>&#123;<br>	name <span class="hljs-keyword">string</span><br>	age <span class="hljs-keyword">int</span><br>&#125;<br><span class="hljs-keyword">var</span> P person<br>P.name = <span class="hljs-string">&#x27;xxx&#x27;</span><br>P.age = <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure>
<p>此外，P可以按照顺序初始化<br>P := person{“xxx”, 10}<br>也可以通过field：value的方式初始化<br>P := person{age:10, name=“xxx”}<br>也可以用new函数分配一个指针，此处P的类型为*person</p>
<h3 id="匿名字段"><a href="#匿名字段" class="headerlink" title="匿名字段"></a>匿名字段</h3><p>Go 支持匿名字段，自定义类型，struct，内置类型都可作为匿名字段</p>
<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><p><strong>method</strong> is a function with an implicit first argument, called a receiver.<br><strong>Definition</strong> Func (r ReceiverType) funcName(parameters)(results)</p>
<h3 id="指针作为receiver"><a href="#指针作为receiver" class="headerlink" title="指针作为receiver"></a>指针作为receiver</h3><p>当我们想改变list中一个对象的值时，如果传递对象本身，func接受的是对象的copy，也就是其修改不能真正作用到对象身上，所以我们应该传递指针。</p>
<blockquote>
<p>如果一个method的receiver是*T，你可以在一个T类型的实例变量V上调用method，而不需要&amp;V去调用这个method<br>类似的<br>如果一个method 的人receiver是T，你可以在一个T类型的变量P上面调用这个method，而不需要P去调用这个method  </p>
</blockquote>
<h1 id="Interface"><a href="#Interface" class="headerlink" title="Interface"></a>Interface</h1><p>interface是一组抽象方法的组合，我们通过interface来定义对象的一组行为<br>必须由其他非interface类型实现，而不能自我型实现，Go通过interface实现了duck-typing：即“当看到一只鸟走起来像鸭子、有用起来像鸭子、叫起来也像鸭子”，那么这只鸟就可以被称为“鸭子”。</p>
<h2 id="空interface"><a href="#空interface" class="headerlink" title="空interface"></a>空interface</h2><p>空 interface (interface {}) 不包含任何的 method，正因为如此，所有的类型都实现了空 interface。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// 定义 a 为空接口</span><br><span class="hljs-keyword">var</span> a <span class="hljs-keyword">interface</span>&#123;&#125;<br><span class="hljs-keyword">var</span> I <span class="hljs-keyword">int</span> = <span class="hljs-number">5</span><br>s := “Hello world”<br><span class="hljs-comment">// a 可以存储任意类型的数值</span><br>a = I<br>a = s<br></code></pre></td></tr></table></figure>
<p><strong>一个函数把 interface {} 作为参数，那么他可以接受任意类型的值作为参数，如果一个函数返回 interface {}, 那么也就可以返回任意类型的值</strong></p>
<h2 id="interface变量存储的类型"><a href="#interface变量存储的类型" class="headerlink" title="interface变量存储的类型"></a>interface变量存储的类型</h2><p>我们知道 interface 的变量里面可以存储任意类型的数值 (该类型实现了 interface)。那么我们怎么反向知道这个变量里面实际保存了的是哪个类型的对象呢？目前常用的有两种方法：</p>
<blockquote>
<p>Comma-ok 断言<br>Go 语言里面有一个语法，可以直接判断是否是该类型的变量： value, ok = element.(T)，这里 value 就是变量的值，ok 是一个 bool 类型，element 是 interface 变量，T 是断言的类型。  </p>
</blockquote>
<h2 id="内嵌interface"><a href="#内嵌interface" class="headerlink" title="内嵌interface"></a>内嵌interface</h2><h2 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h2><p>Go 语言实现了反射，所谓反射就是能检查程序在运行时的状态。我们一般用到的包是 reflect 包。<br>使用reflect一般分成三步</p>
<ol>
<li><p>要去反射是一个类型的值 (这些值都实现了空 interface)，首先需要把它转化成 reflect 对象 (reflect.Type 或者 reflect.Value，根据不同的情况调用不同的函数)。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// 反射的字段必须是可修改的</span><br><span class="hljs-keyword">var</span> x <span class="hljs-keyword">float64</span> = <span class="hljs-number">3.5</span><br>v := reflect.ValueOf(x)<br>fmt.Println(“<span class="hljs-keyword">type</span>:”, v.Type())<br>fmt.Println(“kind is <span class="hljs-keyword">float64</span>:”, v.Kind() == reflect.*Float64*)<br>fmt.Println(“value:”, v.Float())<br></code></pre></td></tr></table></figure>
</li>
<li><p>然后我们可以执行一些操作，将reflect对象转成对应的值</p>
</li>
<li><p>最后反射的字段必须是可修改的，同传值和传引用也是一样的道理。</p>
</li>
</ol>
</div></article><div class="post-view__sidebar"><div class="sidebar"><div class="tocbot"><h2>Toc</h2><div class="toc__content"></div></div><h2>Links</h2><div class="sidebar__link"><ul><li><a target="_blank" rel="noopener" href="https://github.com/yours">Github</a></li><li><a target="_blank" rel="noopener" href="https://codepen.io/yours">Codepen</a></li><li><a target="_blank" rel="noopener" href="https://dribbble.com/yours">Dribbble</a></li><li><a target="_blank" rel="noopener" href="https://twitter.com/yours">Twitter</a></li><li><a target="_blank" rel="noopener" href="https://www.zhihu.com/people/yours">知乎</a></li><li><a target="_blank" rel="noopener" href="https://juejin.im/user/yours">掘金</a></li><li><a href="mailto:xxx@yourmail.xxxx">Mail</a></li></ul></div><h2>Archives</h2><div class="sidebar__archives"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a></li></ul></div><h2>Categories</h2><div class="sidebar__categories"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Golang/">Golang</a></li></ul></div><h2>Tags</h2><div class="sidebar__tags"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gin/" rel="tag">Gin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/" rel="tag">go基础学习</a></li></ul></div></div></div></div><div class="horizontal-line" style="height: 1px"></div><div class="main__bottom"><div class="pre-next"><a class="pre-button" href="/2020/09/22/Go%20%E5%B9%B6%E5%8F%91/">Go并发</a><a class="next-button" href="/2020/09/21/Go%20%E5%9F%BA%E7%A1%80%E7%AF%87%E7%AC%94%E8%AE%B0/">Go基础篇笔记</a></div></div></div></div><div class="footer"><span>©️2019-2020 Designed By&nbsp;<strong><a target="_blank" rel="noopener" href="https://github.com/random-yang">RandomYang</a></strong> Powered By&nbsp;</span><strong><a target="_blank" rel="noopener" href="https://hexo.io">hexo</a></strong></div><div class="darkmode-mask" id="darkmode-mask"></div><div class="sidebar__button"></div></body></html>